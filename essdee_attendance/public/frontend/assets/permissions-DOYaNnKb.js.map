{"version":3,"file":"permissions-DOYaNnKb.js","sources":["../../../../frontend/src/data/permissions.js"],"sourcesContent":["import { createResource } from \"frappe-ui\"\nimport { employeeResource } from \"./employee\"\n\nimport dayjs from \"@/utils/dayjs\"\n\nconst transformPermissionData = (data) => {\n\treturn data.map((permission) => {\n\t\tpermission.leave_dates = getPermissions(permission)\n\t\tpermission.doctype = \"Essdee Permission Application\"\n\t\treturn permission\n\t})\n}\n\nexport const getPermissions = (permission) => {\n\treturn `${dayjs(permission.start_date).format(\"D MMM\")} ${permission.start_time}- ${dayjs(permission.end_date).format(\"D MMM\")} ${permission.end_time}`\n}\n\nexport const myPermissions = createResource({\n\turl: \"essdee_attendance.api.get_permission_applications\",\n\tparams: {\n\t\temployee: employeeResource.data.name,\n\t\tlimit: 10,\n\t},\n\tauto: true,\n\tcache: \"hrms:my_permissions\",\n\ttransform(data) {\n\t\treturn transformPermissionData(data)\n\t},\n})\n\nexport const teamPermissions = createResource({\n\turl: \"essdee_attendance.api.get_permission_applications\",\n\tparams: {\n\t\temployee: employeeResource.data.name,\n\t\tapprover_id: employeeResource.data.user_id,\n\t\tfor_approval: true,\n\t\tlimit: 10,\n\t},\n\tauto: true,\n\tcache: \"hrms:team_permissions\",\n\ttransform(data) {\n\t\tconsole.log(data)\n\t\treturn transformPermissionData(data)\n\t},\n})\n\nexport const permissionBalance = createResource({\n\turl: \"essdee_attendance.api.get_personal_permission_balance\",\n\tparams: {\n\t\temployee: employeeResource.data.name,\n\t},\n\tauto: true,\n\tcache: \"hrms:permission_balance\",\n\ttransform: (data) => {\n\t\treturn data\n\t},\n})\n"],"names":["transformPermissionData","data","permission","getPermissions","dayjs","myPermissions","createResource","employeeResource","teamPermissions","permissionBalance"],"mappings":"2FAKA,MAAMA,EAA2BC,GACzBA,EAAK,IAAKC,IAChBA,EAAW,YAAcC,EAAeD,CAAU,EAClDA,EAAW,QAAU,gCACdA,EACP,EAGWC,EAAkBD,GACvB,GAAGE,EAAMF,EAAW,UAAU,EAAE,OAAO,OAAO,CAAC,IAAIA,EAAW,UAAU,KAAKE,EAAMF,EAAW,QAAQ,EAAE,OAAO,OAAO,CAAC,IAAIA,EAAW,QAAQ,GAGzIG,EAAgBC,EAAe,CAC3C,IAAK,oDACL,OAAQ,CACP,SAAUC,EAAiB,KAAK,KAChC,MAAO,EACP,EACD,KAAM,GACN,MAAO,sBACP,UAAUN,EAAM,CACf,OAAOD,EAAwBC,CAAI,CACnC,CACF,CAAC,EAEYO,EAAkBF,EAAe,CAC7C,IAAK,oDACL,OAAQ,CACP,SAAUC,EAAiB,KAAK,KAChC,YAAaA,EAAiB,KAAK,QACnC,aAAc,GACd,MAAO,EACP,EACD,KAAM,GACN,MAAO,wBACP,UAAUN,EAAM,CACf,eAAQ,IAAIA,CAAI,EACTD,EAAwBC,CAAI,CACnC,CACF,CAAC,EAEYQ,EAAoBH,EAAe,CAC/C,IAAK,wDACL,OAAQ,CACP,SAAUC,EAAiB,KAAK,IAChC,EACD,KAAM,GACN,MAAO,0BACP,UAAYN,GACJA,CAET,CAAC"}