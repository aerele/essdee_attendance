import{_ as j,b as B,c as I}from"./index-DY6of2et.js";import{c as V,O as R,y as l,n as o,q as e,i as h,a2 as S,f as b,j as n,l as r,x as t,t as u,k as _,K as k,a5 as m,v as w,F as D,H as z,I as A}from"./frappe-ui-DZDZpt4w.js";import H from"./EmployeeAvatar-BxuleOmI.js";import{n as c,a as L,u as d}from"./notifications-BuA3sCtD.js";const M={class:"flex flex-col h-screen w-screen"},P={class:"w-full sm:w-96"},T={class:"flex flex-row bg-white shadow-sm py-4 px-3 items-center justify-between border-b sticky top-0 z-10"},E={class:"flex flex-row items-center"},F=t("h2",{class:"text-xl font-semibold text-gray-900"},"Notifications",-1),q={class:"flex flex-col gap-4 mt-5 p-4"},K={class:"flex flex-row justify-between items-center"},O={key:0,class:"text-lg text-gray-800 font-semibold"},U={class:"flex ml-auto gap-1"},Y={key:0,class:"flex flex-col bg-white rounded"},G={class:"flex flex-col gap-0.5 grow ml-3"},J=["innerHTML"],Q={class:"text-xs font-normal text-gray-500"},ae={__name:"Notifications",setup(W){h("$user");const v=h("$dayjs"),x=S(),y=V(()=>{var a;return((a=window.frappe)==null?void 0:a.boot.push_relay_server_url)&&L.data}),p=R({url:"essdee_attendance.api.mark_all_notifications_as_read",onSuccess(){c.reload()}});function C(a){c.setValue.submit({name:a,read:1},{onSuccess:()=>{d.reload()}})}function N(a){return{name:`${a.reference_document_type.replace(/\s+/g,"")}DetailView`,params:{id:a.reference_document_name}}}return(a,i)=>{const f=b("Button"),$=b("router-link");return n(),l(e(I),null,{default:o(()=>[r(e(B),{class:"ion-padding"},{default:o(()=>{var g;return[t("div",M,[t("div",P,[t("header",T,[t("div",E,[r(f,{variant:"ghost",class:"!pl-0 hover:bg-white",onClick:i[0]||(i[0]=s=>e(x).back())},{default:o(()=>[r(e(u),{name:"chevron-left",class:"h-5 w-5"})]),_:1}),F])]),t("div",q,[t("div",K,[e(d).data?(n(),_("div",O,k(e(d).data)+" Unread ",1)):m("",!0),t("div",U,[y.value?(n(),l(f,{key:0,variant:"outline",onClick:i[1]||(i[1]=s=>e(x).push({name:"Settings"}))},{prefix:o(()=>[r(e(u),{name:"settings",class:"w-4"})]),default:o(()=>[w(" Settings ")]),_:1})):m("",!0),e(d).data?(n(),l(f,{key:1,variant:"outline",onClick:e(p).submit,loading:e(p).loading},{prefix:o(()=>[r(e(u),{name:"check-circle",class:"w-4"})]),default:o(()=>[w(" Mark all as read ")]),_:1},8,["onClick","loading"])):m("",!0)])]),(g=e(c).data)!=null&&g.length?(n(),_("div",Y,[(n(!0),_(D,null,z(e(c).data,s=>(n(),l($,{class:A(["flex flex-row items-start p-4 justify-between border-b before:mt-3","before:content-[''] before:mr-2 before:shrink-0 before:w-1.5 before:h-1.5 before:rounded-full",s.read?"bg-white-500":"before:bg-blue-500"]),key:s.name,to:N(s),onClick:X=>C(s.name)},{default:o(()=>[r(H,{userID:s.from_user,size:"lg"},null,8,["userID"]),t("div",G,[t("div",{class:"text-sm leading-5 font-normal text-gray-800",innerHTML:s.message},null,8,J),t("div",Q,k(e(v)(s.creation).fromNow()),1)])]),_:2},1032,["class","to","onClick"]))),128))])):(n(),l(j,{key:1,message:"You have no notifications"}))])])])]}),_:1})]),_:1})}}};export{ae as default};
//# sourceMappingURL=Notifications-CZJufZTW.js.map
