{"version":3,"file":"Form-CaegMLcK.js","sources":["../../../../frontend/src/views/expense_claim/Form.vue"],"sourcesContent":["<template>\n\t<ion-page>\n\t\t<ion-content :fullscreen=\"true\">\n\t\t\t<FormView\n\t\t\t\tv-if=\"formFields.data\"\n\t\t\t\tdoctype=\"Expense Claim\"\n\t\t\t\tv-model=\"expenseClaim\"\n\t\t\t\t:isSubmittable=\"true\"\n\t\t\t\t:fields=\"formFields.data\"\n\t\t\t\t:id=\"props.id\"\n\t\t\t\t:tabbedView=\"true\"\n\t\t\t\t:tabs=\"tabs\"\n\t\t\t\t:showAttachmentView=\"true\"\n\t\t\t\t@validateForm=\"validateForm\"\n\t\t\t>\n\t\t\t\t<!-- Child Tables -->\n\t\t\t\t<template #expenses=\"{ isFormReadOnly }\">\n\t\t\t\t\t<ExpensesTable\n\t\t\t\t\t\tv-model:expenseClaim=\"expenseClaim\"\n\t\t\t\t\t\t:currency=\"currency\"\n\t\t\t\t\t\t:isReadOnly=\"isReadOnly || isFormReadOnly\"\n\t\t\t\t\t\t@addExpenseItem=\"addExpenseItem\"\n\t\t\t\t\t\t@updateExpenseItem=\"updateExpenseItem\"\n\t\t\t\t\t\t@deleteExpenseItem=\"deleteExpenseItem\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\n\t\t\t\t<template #taxes=\"{ isFormReadOnly }\">\n\t\t\t\t\t<ExpenseTaxesTable\n\t\t\t\t\t\tv-model:expenseClaim=\"expenseClaim\"\n\t\t\t\t\t\t:currency=\"currency\"\n\t\t\t\t\t\t:isReadOnly=\"isReadOnly || isFormReadOnly\"\n\t\t\t\t\t\t@addExpenseTax=\"addExpenseTax\"\n\t\t\t\t\t\t@updateExpenseTax=\"updateExpenseTax\"\n\t\t\t\t\t\t@deleteExpenseTax=\"deleteExpenseTax\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\n\t\t\t\t<template #advances=\"{ isFormReadOnly }\">\n\t\t\t\t\t<ExpenseAdvancesTable\n\t\t\t\t\t\tv-model:expenseClaim=\"expenseClaim\"\n\t\t\t\t\t\t:currency=\"currency\"\n\t\t\t\t\t\t:isReadOnly=\"isReadOnly || isFormReadOnly\"\n\t\t\t\t\t/>\n\t\t\t\t</template>\n\t\t\t</FormView>\n\t\t</ion-content>\n\t</ion-page>\n</template>\n\n<script setup>\nimport { IonPage, IonContent } from \"@ionic/vue\"\nimport { createResource } from \"frappe-ui\"\nimport { computed, ref, watch, inject } from \"vue\"\n\nimport FormView from \"@/components/FormView.vue\"\nimport ExpensesTable from \"@/components/ExpensesTable.vue\"\nimport ExpenseTaxesTable from \"@/components/ExpenseTaxesTable.vue\"\nimport ExpenseAdvancesTable from \"@/components/ExpenseAdvancesTable.vue\"\n\nimport { getCompanyCurrency } from \"@/data/currencies\"\n\nconst dayjs = inject(\"$dayjs\")\nconst employee = inject(\"$employee\")\nconst today = dayjs().format(\"YYYY-MM-DD\")\nconst isReadOnly = ref(false)\n\nconst props = defineProps({\n\tid: {\n\t\ttype: String,\n\t\trequired: false,\n\t},\n})\n\nconst tabs = [\n\t{ name: \"Expenses\", lastField: \"taxes\" },\n\t{ name: \"Advances\", lastField: \"advances\" },\n\t{ name: \"Totals\", lastField: \"cost_center\" },\n]\n\n// object to store form data\nconst expenseClaim = ref({\n\temployee: employee.data.name,\n\tcompany: employee.data.company,\n})\n\nconst currency = computed(() => getCompanyCurrency(expenseClaim.value.company))\n\n// get form fields\nconst formFields = createResource({\n\turl: \"essdee_attendance.api.get_doctype_fields\",\n\tparams: { doctype: \"Expense Claim\" },\n\ttransform(data) {\n\t\tlet fields = getFilteredFields(data)\n\n\t\treturn fields.map((field) => {\n\t\t\tif (field.fieldname === \"posting_date\") field.default = today\n\t\t\treturn applyFilters(field)\n\t\t})\n\t},\n\tonSuccess(_data) {\n\t\texpenseApproverDetails.reload()\n\t\tcompanyDetails.reload()\n\t},\n})\nformFields.reload()\n\n// resources\nconst advances = createResource({\n\turl: \"hrms.hr.doctype.expense_claim.expense_claim.get_advances\",\n\tparams: { employee: employee.data.name },\n\tauto: true,\n\tonSuccess(data) {\n\t\t// set advances\n\t\tif (props.id) {\n\t\t\texpenseClaim.value.advances?.map((advance) => (advance.selected = true))\n\t\t} else {\n\t\t\texpenseClaim.value.advances = []\n\t\t}\n\n\t\treturn data.forEach((advance) => {\n\t\t\tif (\n\t\t\t\tprops.id &&\n\t\t\t\texpenseClaim.value.advances?.some(\n\t\t\t\t\t(entry) => entry.employee_advance === advance.name\n\t\t\t\t)\n\t\t\t)\n\t\t\t\treturn\n\n\t\t\texpenseClaim.value.advances?.push({\n\t\t\t\temployee_advance: advance.name,\n\t\t\t\tpurpose: advance.purpose,\n\t\t\t\tposting_date: advance.posting_date,\n\t\t\t\tadvance_account: advance.advance_account,\n\t\t\t\tadvance_paid: advance.paid_amount,\n\t\t\t\tunclaimed_amount: advance.paid_amount - advance.claimed_amount,\n\t\t\t\tallocated_amount: 0,\n\t\t\t})\n\t\t})\n\t},\n})\n\nconst expenseApproverDetails = createResource({\n\turl: \"essdee_attendance.api.get_expense_approval_details\",\n\tparams: { employee: employee.data.name },\n\tonSuccess(data) {\n\t\tsetExpenseApprover(data)\n\t},\n})\n\nconst companyDetails = createResource({\n\turl: \"essdee_attendance.api.get_company_cost_center_and_expense_account\",\n\tparams: { company: expenseClaim.value.company },\n\tonSuccess(data) {\n\t\texpenseClaim.value.cost_center = data?.cost_center\n\t\texpenseClaim.value.payable_account =\n\t\t\tdata?.default_expense_claim_payable_account\n\t},\n})\n\n// form scripts\nwatch(\n\t() => expenseClaim.value.employee,\n\t(employee_id) => {\n\t\tif (props.id && employee_id !== employee.data.name) {\n\t\t\t// if employee is not the current user, set form as read only\n\t\t\tsetFormReadOnly()\n\t\t}\n\t}\n)\n\nwatch(\n\t() => props.id && expenseClaim.value.expenses,\n\t(_) => {\n\t\tif (expenseClaim.value.docstatus === 0) {\n\t\t\tadvances.reload()\n\t\t}\n\t}\n)\n\nwatch(\n\t() => expenseClaim.value.advances,\n\t(_value) => {\n\t\tcalculateTotalAdvance()\n\t},\n\t{ deep: true }\n)\n\nwatch(\n\t() => expenseClaim.value.cost_center,\n\t() => {\n\t\texpenseClaim?.value?.expenses?.forEach((expense) => {\n\t\t\texpense.cost_center = expenseClaim.value.cost_center\n\t\t})\n\t}\n)\n\n// helper functions\nfunction getFilteredFields(fields) {\n\t// reduce noise from the form view by excluding unnecessary fields\n\t// eg: employee and other details can be fetched from the session user\n\tconst excludeFields = [\n\t\t\"naming_series\",\n\t\t\"task\",\n\t\t\"taxes_and_charges_sb\",\n\t\t\"advance_payments_sb\",\n\t]\n\tconst extraFields = [\n\t\t\"employee\",\n\t\t\"employee_name\",\n\t\t\"department\",\n\t\t\"company\",\n\t\t\"remark\",\n\t\t\"is_paid\",\n\t\t\"mode_of_payment\",\n\t\t\"clearance_date\",\n\t\t\"approval_status\",\n\t]\n\n\tif (!props.id) excludeFields.push(...extraFields)\n\n\treturn fields.filter((field) => !excludeFields.includes(field.fieldname))\n}\n\nfunction applyFilters(field) {\n\tif (field.fieldname === \"payable_account\") {\n\t\tfield.linkFilters = {\n\t\t\treport_type: \"Balance Sheet\",\n\t\t\taccount_type: \"Payable\",\n\t\t\tcompany: expenseClaim.value.company,\n\t\t\tis_group: 0,\n\t\t}\n\t} else if (field.fieldname === \"cost_center\") {\n\t\tfield.linkFilters = {\n\t\t\tcompany: expenseClaim.value.company,\n\t\t\tis_group: 0,\n\t\t}\n\t} else if (field.fieldname === \"project\") {\n\t\tfield.linkFilters = {\n\t\t\tcompany: expenseClaim.value.company,\n\t\t}\n\t}\n\n\treturn field\n}\n\nfunction setExpenseApprover(data) {\n\tconst expense_approver = formFields.data?.find(\n\t\t(field) => field.fieldname === \"expense_approver\"\n\t)\n\texpense_approver.reqd = data?.is_mandatory\n\texpense_approver.documentList = data?.department_approvers.map(\n\t\t(approver) => ({\n\t\t\tlabel: approver.full_name\n\t\t\t\t? `${approver.name} : ${approver.full_name}`\n\t\t\t\t: approver.name,\n\t\t\tvalue: approver.name,\n\t\t})\n\t)\n\n\texpenseClaim.value.expense_approver = data?.expense_approver\n\texpenseClaim.value.expense_approver_name = data?.expense_approver_name\n}\n\nfunction addExpenseItem(item) {\n\tif (!expenseClaim.value.expenses) expenseClaim.value.expenses = []\n\texpenseClaim.value.expenses.push(item)\n\tcalculateTotals()\n\tcalculateTaxes()\n\tallocateAdvanceAmount()\n}\n\nfunction updateExpenseItem(item, idx) {\n\texpenseClaim.value.expenses[idx] = item\n\tcalculateTotals()\n\tcalculateTaxes()\n\tallocateAdvanceAmount()\n}\n\nfunction deleteExpenseItem(idx) {\n\texpenseClaim.value.expenses.splice(idx, 1)\n\tcalculateTotals()\n\tcalculateTaxes()\n\tallocateAdvanceAmount()\n}\n\nfunction addExpenseTax(item) {\n\tif (!expenseClaim.value.taxes) expenseClaim.value.taxes = []\n\texpenseClaim.value.taxes.push(item)\n\tcalculateTaxes()\n\tallocateAdvanceAmount()\n}\n\nfunction updateExpenseTax(item, idx) {\n\texpenseClaim.value.taxes[idx] = item\n\tcalculateTaxes()\n\tallocateAdvanceAmount()\n}\n\nfunction deleteExpenseTax(idx) {\n\texpenseClaim.value.taxes.splice(idx, 1)\n\tcalculateTaxes()\n\tallocateAdvanceAmount()\n}\n\nfunction calculateTotals() {\n\tlet total_claimed_amount = 0\n\tlet total_sanctioned_amount = 0\n\n\texpenseClaim.value?.expenses?.forEach((item) => {\n\t\ttotal_claimed_amount += parseFloat(item.amount)\n\t\ttotal_sanctioned_amount += parseFloat(item.sanctioned_amount)\n\t})\n\n\texpenseClaim.value.total_claimed_amount = total_claimed_amount\n\texpenseClaim.value.total_sanctioned_amount = total_sanctioned_amount\n\tcalculateGrandTotal()\n}\n\nfunction calculateTaxes() {\n\tlet total_taxes_and_charges = 0\n\n\texpenseClaim.value?.taxes?.forEach((item) => {\n\t\tif (item.rate) {\n\t\t\titem.tax_amount =\n\t\t\t\tparseFloat(expenseClaim.value.total_sanctioned_amount) *\n\t\t\t\tparseFloat(item.rate / 100)\n\t\t}\n\n\t\titem.total =\n\t\t\tparseFloat(item.tax_amount) +\n\t\t\tparseFloat(expenseClaim.value.total_sanctioned_amount)\n\t\ttotal_taxes_and_charges += parseFloat(item.tax_amount)\n\t})\n\texpenseClaim.value.total_taxes_and_charges = total_taxes_and_charges\n\tcalculateGrandTotal()\n}\n\nfunction calculateGrandTotal() {\n\texpenseClaim.value.grand_total =\n\t\tparseFloat(expenseClaim.value.total_sanctioned_amount || 0) +\n\t\tparseFloat(expenseClaim.value.total_taxes_and_charges || 0) -\n\t\tparseFloat(expenseClaim.value.total_advance_amount || 0)\n}\n\nfunction allocateAdvanceAmount() {\n\t// allocate reqd advance amount\n\tlet amount_to_be_allocated =\n\t\tparseFloat(expenseClaim.value.total_sanctioned_amount) +\n\t\tparseFloat(expenseClaim.value.total_taxes_and_charges)\n\tlet total_advance_amount = 0\n\n\texpenseClaim?.value?.advances?.forEach((advance) => {\n\t\tif (amount_to_be_allocated >= parseFloat(advance.unclaimed_amount)) {\n\t\t\tadvance.allocated_amount = parseFloat(advance.unclaimed_amount)\n\t\t\tamount_to_be_allocated -= parseFloat(advance.allocated_amount)\n\t\t} else {\n\t\t\tadvance.allocated_amount = amount_to_be_allocated\n\t\t\tamount_to_be_allocated = 0\n\t\t}\n\n\t\tadvance.selected = advance.allocated_amount > 0 ? true : false\n\t\ttotal_advance_amount += parseFloat(advance.allocated_amount)\n\t})\n\texpenseClaim.value.total_advance_amount = total_advance_amount\n\tcalculateGrandTotal()\n}\n\nfunction calculateTotalAdvance() {\n\t// update total advance amount as per user selection & edited values\n\tlet total_advance_amount = 0\n\n\texpenseClaim?.value?.advances?.forEach((advance) => {\n\t\tif (advance.selected) {\n\t\t\ttotal_advance_amount += parseFloat(advance.allocated_amount)\n\t\t}\n\t})\n\texpenseClaim.value.total_advance_amount = total_advance_amount\n\tcalculateGrandTotal()\n}\n\nfunction setFormReadOnly() {\n\tif (expenseClaim.value.expense_approver === employee.data.user_id) return\n\tformFields.data.map((field) => (field.read_only = true))\n\tisReadOnly.value = true\n}\n\nfunction validateForm() {\n\t// set selected advances\n\tif (!expenseClaim?.value?.advances) return\n\n\texpenseClaim.value.advances = expenseClaim?.value?.advances?.filter(\n\t\t(advance) => advance.selected\n\t)\n\texpenseClaim?.value?.expenses?.forEach((expense) => {\n\t\texpense.cost_center = expenseClaim.value.cost_center\n\t})\n}\n</script>\n"],"names":["dayjs","inject","employee","today","isReadOnly","ref","props","__props","tabs","expenseClaim","currency","computed","getCompanyCurrency","formFields","createResource","data","getFilteredFields","field","applyFilters","_data","expenseApproverDetails","companyDetails","advances","_a","advance","entry","_b","setExpenseApprover","watch","employee_id","setFormReadOnly","_","_value","calculateTotalAdvance","expense","fields","excludeFields","extraFields","expense_approver","approver","addExpenseItem","item","calculateTotals","calculateTaxes","allocateAdvanceAmount","updateExpenseItem","idx","deleteExpenseItem","addExpenseTax","updateExpenseTax","deleteExpenseTax","total_claimed_amount","total_sanctioned_amount","calculateGrandTotal","total_taxes_and_charges","amount_to_be_allocated","total_advance_amount","validateForm","_c","_e","_d"],"mappings":"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"}