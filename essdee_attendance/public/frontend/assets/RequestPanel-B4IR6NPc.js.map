{"version":3,"file":"RequestPanel-B4IR6NPc.js","sources":["../../../../frontend/src/components/RequestPanel.vue"],"sourcesContent":["<template>\n\t<div class=\"w-full\">\n\t\t<div class=\"text-lg font-medium text-gray-900 pb-4\">{{ 'Leave Requests' }}</div>\n\t\t<TabButtons\n\t\t\t:buttons=\"[{ label: 'My Requests' }, { label: 'Team Requests' }]\"\n\t\t\tv-model=\"activeTab\"\n\t\t/>\n\t\t<RequestList v-if=\"activeTab == 'My Requests'\" :items=\"myRequests\" />\n\t\t<RequestList\n\t\t\tv-else-if=\"activeTab == 'Team Requests'\"\n\t\t\t:items=\"teamRequests\"\n\t\t\t:teamRequests=\"true\"\n\t\t/>\n\t</div>\n</template>\n\n<script setup>\nimport { ref, inject, onMounted, computed, markRaw } from \"vue\"\n\nimport TabButtons from \"@/components/TabButtons.vue\"\nimport RequestList from \"@/components/RequestList.vue\"\n\nimport { myLeaves, teamLeaves } from \"@/data/leaves\"\nimport { myClaims, teamClaims } from \"@/data/claims\"\n\nimport LeaveRequestItem from \"@/components/LeaveRequestItem.vue\"\nimport ExpenseClaimItem from \"@/components/ExpenseClaimItem.vue\"\n\nimport { useListUpdate } from \"@/composables/realtime\"\n\nconst activeTab = ref(\"My Requests\")\nconst socket = inject(\"$socket\")\n\nconst myRequests = computed(() => updateRequestDetails(myLeaves, myClaims))\n\nconst teamRequests = computed(() =>\n\tupdateRequestDetails(teamLeaves, teamClaims)\n)\n\nfunction updateRequestDetails(leaves, claims) {\n\tconst requests = [...(leaves.data || []), ...(claims.data || [])]\n\trequests.forEach((request) => {\n\t\tif (request.doctype === \"Leave Application\") {\n\t\t\trequest.component = markRaw(LeaveRequestItem)\n\t\t} else if (request.doctype === \"Expense Claim\") {\n\t\t\trequest.component = markRaw(ExpenseClaimItem)\n\t\t}\n\t})\n\treturn getSortedRequests(requests)\n}\n\nfunction getSortedRequests(list) {\n\t// return top 10 requests sorted by posting date\n\treturn list\n\t\t.sort((a, b) => {\n\t\t\treturn new Date(b.posting_date) - new Date(a.posting_date)\n\t\t})\n\t\t.splice(0, 10)\n}\n\nonMounted(() => {\n\tuseListUpdate(socket, \"Leave Application\", () => teamLeaves.reload())\n\tuseListUpdate(socket, \"Expense Claim\", () => teamClaims.reload())\n})\n</script>\n"],"names":["activeTab","ref","socket","inject","myRequests","computed","updateRequestDetails","myLeaves","myClaims","teamRequests","teamLeaves","teamClaims","leaves","claims","requests","request","markRaw","LeaveRequestItem","ExpenseClaimItem","getSortedRequests","list","a","b","onMounted","useListUpdate"],"mappings":"w1BA8BA,MAAMA,EAAYC,EAAI,aAAa,EAC7BC,EAASC,EAAO,SAAS,EAEzBC,EAAaC,EAAS,IAAMC,EAAqBC,EAAUC,CAAQ,CAAC,EAEpEC,EAAeJ,EAAS,IAC7BC,EAAqBI,EAAYC,CAAU,CAC5C,EAEA,SAASL,EAAqBM,EAAQC,EAAQ,CAC7C,MAAMC,EAAW,CAAC,GAAIF,EAAO,MAAQ,GAAK,GAAIC,EAAO,MAAQ,CAAA,CAAG,EAChE,OAAAC,EAAS,QAASC,GAAY,CACzBA,EAAQ,UAAY,oBACvBA,EAAQ,UAAYC,EAAQC,CAAgB,EAClCF,EAAQ,UAAY,kBAC9BA,EAAQ,UAAYC,EAAQE,CAAgB,EAE/C,CAAE,EACMC,EAAkBL,CAAQ,CAClC,CAEA,SAASK,EAAkBC,EAAM,CAEhC,OAAOA,EACL,KAAK,CAACC,EAAGC,IACF,IAAI,KAAKA,EAAE,YAAY,EAAI,IAAI,KAAKD,EAAE,YAAY,CACzD,EACA,OAAO,EAAG,EAAE,CACf,CAEA,OAAAE,EAAU,IAAM,CACfC,EAActB,EAAQ,oBAAqB,IAAMQ,EAAW,OAAM,CAAE,EACpEc,EAActB,EAAQ,gBAAiB,IAAMS,EAAW,OAAM,CAAE,CACjE,CAAC"}