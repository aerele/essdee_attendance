{"version":3,"file":"FileUploaderView-LNKCLKYB.js","sources":["../../../../frontend/src/components/FileUploaderView.vue"],"sourcesContent":["<template>\n\t<div class=\"flex flex-col gap-3 py-4\">\n\t\t<label class=\"file-select\">\n\t\t\t<h2 class=\"text-base font-semibold text-gray-800 pb-4\">Attachments</h2>\n\t\t\t<div class=\"select-button cursor-pointer\">\n\t\t\t\t<div\n\t\t\t\t\tclass=\"flex flex-col w-full border shadow-sm items-center rounded p-3 gap-2\"\n\t\t\t\t>\n\t\t\t\t\t<FeatherIcon name=\"upload\" class=\"h-6 w-6 text-gray-700\" />\n\t\t\t\t\t<span class=\"block text-sm font-normal leading-5 text-gray-700\">\n\t\t\t\t\t\tUpload images or documents\n\t\t\t\t\t</span>\n\t\t\t\t</div>\n\t\t\t\t<input\n\t\t\t\t\tclass=\"hidden\"\n\t\t\t\t\tref=\"input\"\n\t\t\t\t\ttype=\"file\"\n\t\t\t\t\tmultiple\n\t\t\t\t\taccept=\"*\"\n\t\t\t\t\t@change=\"(e) => emit('handle-file-select', e)\"\n\t\t\t\t/>\n\t\t\t</div>\n\t\t</label>\n\n\t\t<div v-if=\"modelValue.length\" class=\"w-full\">\n\t\t\t<ul class=\"w-full flex flex-col items-center gap-2\">\n\t\t\t\t<li\n\t\t\t\t\tclass=\"bg-gray-100 rounded p-2 w-full\"\n\t\t\t\t\tv-for=\"(file, index) in modelValue\"\n\t\t\t\t\t:key=\"index\"\n\t\t\t\t>\n\t\t\t\t\t<div\n\t\t\t\t\t\tclass=\"flex flex-row items-center justify-between text-gray-700 text-sm\"\n\t\t\t\t\t>\n\t\t\t\t\t\t<span class=\"grow\" @click=\"showFilePreview(file)\">\n\t\t\t\t\t\t\t{{ file.file_name || file.name }}\n\t\t\t\t\t\t</span>\n\t\t\t\t\t\t<FeatherIcon\n\t\t\t\t\t\t\tname=\"x\"\n\t\t\t\t\t\t\tclass=\"h-4 w-4 cursor-pointer text-gray-700\"\n\t\t\t\t\t\t\t@click=\"() => confirmDeleteAttachment(file)\"\n\t\t\t\t\t\t/>\n\t\t\t\t\t</div>\n\t\t\t\t</li>\n\t\t\t</ul>\n\n\t\t\t<Dialog v-model=\"showDialog\">\n\t\t\t\t<template #body-title>\n\t\t\t\t\t<h2 class=\"text-lg font-bold\">Delete Attachment</h2>\n\t\t\t\t</template>\n\t\t\t\t<template #body-content>\n\t\t\t\t\t<p>\n\t\t\t\t\t\tAre you sure you want to delete the attachment\n\t\t\t\t\t\t<span class=\"font-bold\">{{ selectedFile.file_name }}</span>\n\t\t\t\t\t\t?\n\t\t\t\t\t</p>\n\t\t\t\t</template>\n\t\t\t\t<template #actions>\n\t\t\t\t\t<div class=\"flex flex-row gap-4\">\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"outline\"\n\t\t\t\t\t\t\tclass=\"py-5 w-full\"\n\t\t\t\t\t\t\t@click=\"showDialog = false\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tCancel\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\tvariant=\"solid\"\n\t\t\t\t\t\t\ttheme=\"red\"\n\t\t\t\t\t\t\t@click=\"handleFileDelete\"\n\t\t\t\t\t\t\tclass=\"py-5 w-full\"\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\tDelete\n\t\t\t\t\t\t</Button>\n\t\t\t\t\t</div>\n\t\t\t\t</template>\n\t\t\t</Dialog>\n\n\t\t\t<!-- File Preview Modal -->\n\t\t\t<ion-modal\n\t\t\t\tref=\"modal\"\n\t\t\t\t:is-open=\"showPreviewModal\"\n\t\t\t\t@didDismiss=\"showPreviewModal = false\"\n\t\t\t>\n\t\t\t\t<FilePreviewModal :file=\"selectedFile\" />\n\t\t\t</ion-modal>\n\t\t</div>\n\t</div>\n</template>\n\n<script setup>\nimport { FeatherIcon, Dialog } from \"frappe-ui\"\nimport { ref } from \"vue\"\nimport { IonModal } from \"@ionic/vue\"\n\nimport FilePreviewModal from \"@/components/FilePreviewModal.vue\"\n\nconst props = defineProps({\n\tmodelValue: {\n\t\ttype: Object,\n\t\trequired: true,\n\t},\n})\nlet showDialog = ref(false)\nlet showPreviewModal = ref(false)\nlet selectedFile = ref({})\n\nconst emit = defineEmits([\"handle-file-select\", \"handle-file-delete\"])\n\nfunction showFilePreview(fileObj) {\n\tselectedFile.value = fileObj\n\tshowPreviewModal.value = true\n}\n\nfunction confirmDeleteAttachment(fileObj) {\n\tselectedFile.value = fileObj\n\tshowDialog.value = true\n}\n\nfunction handleFileDelete() {\n\temit(\"handle-file-delete\", selectedFile.value)\n\tshowDialog.value = false\n}\n</script>\n\n<style scoped>\nion-modal {\n\t--height: 100%;\n}\n</style>\n"],"names":["showDialog","ref","showPreviewModal","selectedFile","emit","__emit","showFilePreview","fileObj","confirmDeleteAttachment","handleFileDelete"],"mappings":"ymCAuGA,IAAIA,EAAaC,EAAI,EAAK,EACtBC,EAAmBD,EAAI,EAAK,EAC5BE,EAAeF,EAAI,EAAE,EAEzB,MAAMG,EAAOC,EAEb,SAASC,EAAgBC,EAAS,CACjCJ,EAAa,MAAQI,EACrBL,EAAiB,MAAQ,EAC1B,CAEA,SAASM,EAAwBD,EAAS,CACzCJ,EAAa,MAAQI,EACrBP,EAAW,MAAQ,EACpB,CAEA,SAASS,GAAmB,CAC3BL,EAAK,qBAAsBD,EAAa,KAAK,EAC7CH,EAAW,MAAQ,EACpB"}