{"version":3,"file":"PermissionRequestPanel-5g02ng8b.js","sources":["../../../../frontend/src/components/PermissionRequestPanel.vue"],"sourcesContent":["<template>\n\t<div class=\"w-full\">\n\t\t<div class=\"text-lg font-medium text-gray-900 pb-4\">{{ 'Permission Requests' }}</div>\n\t\t<TabButtons\n\t\t\t:buttons=\"[{ label: 'My Requests' }, { label: 'Team Requests' }]\"\n\t\t\tv-model=\"activeTab\"\n\t\t/>\n\t\t<PermissionRequestList v-if=\"activeTab == 'My Requests'\" :items=\"myRequests\" />\n\t\t<PermissionRequestList\n\t\t\tv-else-if=\"activeTab == 'Team Requests'\"\n\t\t\t:items=\"teamRequests\"\n\t\t\t:teamRequests=\"true\"\n\t\t/>\n\t</div>\n</template>\n\n<script setup>\nimport { ref, inject, onMounted, computed, markRaw } from \"vue\"\n\nimport TabButtons from \"@/components/TabButtons.vue\"\nimport PermissionRequestList from \"@/components/PermissionRequestList.vue\"\n\nimport { myPermissions, teamPermissions } from \"@/data/permissions\"\nimport { myClaims, teamClaims } from \"@/data/claims\"\n\nimport PermissionRequestItem from \"@/components/PermissionRequestItem.vue\"\nimport ExpenseClaimItem from \"@/components/ExpenseClaimItem.vue\"\n\nimport { useListUpdate } from \"@/composables/realtime\"\n\nconst activeTab = ref(\"My Requests\")\nconst socket = inject(\"$socket\")\n\nconst myRequests = computed(() => updateRequestDetails(myPermissions, myClaims))\n\nconst teamRequests = computed(() =>\n\tupdateRequestDetails(teamPermissions, teamClaims)\n)\n\nfunction updateRequestDetails(leaves, claims) {\n\n\tconst requests = [...(leaves.data || []), ...(claims.data || [])]\n\trequests.forEach((request) => {\n\t\tif (request.doctype === \"Essdee Permission Application\") {\n\t\t\trequest.component = markRaw(PermissionRequestItem)\n\t\t} else if (request.doctype === \"Expense Claim\") {\n\t\t\trequest.component = markRaw(ExpenseClaimItem)\n\t\t}\n\t})\n\treturn getSortedRequests(requests)\n}\n\nfunction getSortedRequests(list) {\n\t// return top 10 requests sorted by posting date\n\treturn list\n\t\t.sort((a, b) => {\n\t\t\treturn new Date(b.posting_date) - new Date(a.posting_date)\n\t\t})\n\t\t.splice(0, 10)\n}\n\nonMounted(() => {\n\tuseListUpdate(socket, \"Essdee Permission Application\", () => teamPermissions.reload())\n\tuseListUpdate(socket, \"Expense Claim\", () => teamClaims.reload())\n})\n</script>\n"],"names":["activeTab","ref","socket","inject","myRequests","computed","updateRequestDetails","myPermissions","myClaims","teamRequests","teamPermissions","teamClaims","leaves","claims","requests","request","markRaw","PermissionRequestItem","ExpenseClaimItem","getSortedRequests","list","a","b","onMounted","useListUpdate"],"mappings":"23BA8BA,MAAMA,EAAYC,EAAI,aAAa,EAC7BC,EAASC,EAAO,SAAS,EAEzBC,EAAaC,EAAS,IAAMC,EAAqBC,EAAeC,CAAQ,CAAC,EAEzEC,EAAeJ,EAAS,IAC7BC,EAAqBI,EAAiBC,CAAU,CACjD,EAEA,SAASL,EAAqBM,EAAQC,EAAQ,CAE7C,MAAMC,EAAW,CAAC,GAAIF,EAAO,MAAQ,GAAK,GAAIC,EAAO,MAAQ,CAAA,CAAG,EAChE,OAAAC,EAAS,QAASC,GAAY,CACzBA,EAAQ,UAAY,gCACvBA,EAAQ,UAAYC,EAAQC,CAAqB,EACvCF,EAAQ,UAAY,kBAC9BA,EAAQ,UAAYC,EAAQE,CAAgB,EAE/C,CAAE,EACMC,EAAkBL,CAAQ,CAClC,CAEA,SAASK,EAAkBC,EAAM,CAEhC,OAAOA,EACL,KAAK,CAACC,EAAGC,IACF,IAAI,KAAKA,EAAE,YAAY,EAAI,IAAI,KAAKD,EAAE,YAAY,CACzD,EACA,OAAO,EAAG,EAAE,CACf,CAEA,OAAAE,EAAU,IAAM,CACfC,EAActB,EAAQ,gCAAiC,IAAMQ,EAAgB,OAAM,CAAE,EACrFc,EAActB,EAAQ,gBAAiB,IAAMS,EAAW,OAAM,CAAE,CACjE,CAAC"}