var y=(d,i,o)=>new Promise((p,u)=>{var a=s=>{try{v(o.next(s))}catch(l){u(l)}},w=s=>{try{v(o.throw(s))}catch(l){u(l)}},v=s=>s.done?p(s.value):Promise.resolve(s.value).then(a,w);v((o=o.apply(d,i)).next())});import{f as T,g as $,h as A,i as L,m as B,a as z,b as M,j as P}from"./index-DY6of2et.js";import{E as O,c as x,ab as W,j as f,k as _,l as c,n as r,q as t,v as h,K as F,x as U,F as j,a as I,e as q,f as D,I as N,y as S,t as C,H as R,ak as V,a5 as E}from"./frappe-ui-DZDZpt4w.js";const H={class:"bg-white h-full w-full overflow-auto touch-pinch-zoom"},K=["src"],G=["src"],J={__name:"FilePreviewModal",props:{file:{type:Object,required:!0}},setup(d){const i=d,o=x(()=>i.file.file_name||i.file.name),p=x(()=>i.file.file_url?i.file.file_url:URL.createObjectURL(i.file)),u=x(()=>/\.(gif|jpg|jpeg|tiff|png|svg)$/i.test(o.value));return W(()=>{URL.revokeObjectURL(p.value)}),(a,w)=>(f(),_(j,null,[c(t(z),null,{default:r(()=>[c(t(T),null,{default:r(()=>[c(t($),null,{default:r(()=>[h(F(o.value)+" - File Preview",1)]),_:1}),c(t(A),{slot:"end"},{default:r(()=>[c(t(L),{onClick:w[0]||(w[0]=v=>t(B).dismiss())},{default:r(()=>[h("Close")]),_:1})]),_:1})]),_:1})]),_:1}),c(t(M),null,{default:r(()=>[U("div",H,[u.value?(f(),_("img",{key:0,src:p.value,class:"h-auto image-preview"},null,8,K)):(f(),_("iframe",{key:1,src:p.value,class:"w-full h-full"},null,8,G))])]),_:1})],64))}},Q=O(J,[["__scopeId","data-v-42339bea"]]),oe=Object.freeze(Object.defineProperty({__proto__:null,default:Q},Symbol.toStringTag,{value:"Module"})),X={__name:"WorkflowActionSheet",props:{doc:{type:Object,required:!0},workflow:{type:Object,required:!1},view:{type:String,default:"form",validator:d=>["form","actionSheet"].includes(d)}},emits:["workflow-applied"],setup(d,{emit:i}){const o=d,p=i;let u=I(!1),a=I([]);const w=()=>y(this,null,function*(){const l=yield o.workflow.getTransitions(o.doc);a.value=l.map(n=>{let b="",e="gray",m="subtle",k="",g=n.toLowerCase();return g.includes("reject")||g.includes("cancel")?(b="destructive",e="red",m="subtle",k="x"):g.includes("approve")&&(e="green",m="solid",k="check"),{text:n,role:b,theme:e,variant:m,featherIcon:k,data:{action:n}}})}),v=()=>{var l;((l=a.value)==null?void 0:l.length)>0&&a.value.push({text:"Dismiss",role:"cancel"}),u.value=!0},s=b=>y(this,[b],function*({event:l="",workflowAction:n=""}){var m;const e=n||((m=l.detail.data)==null?void 0:m.action);e&&(yield o.workflow.applyWorkflow(o.doc,e),B.dismiss(),p("workflow-applied")),u.value=!1});return q(()=>w()),(l,n)=>{const b=D("Button");return f(),_(j,null,[t(a).length>0?(f(),_("div",{key:0,class:N([o.view==="form"?"px-4 pt-4 pb-4 standalone:pb-safe-bottom sm:w-96 bg-white sticky bottom-0 w-full drop-shadow-xl z-40 border-t rounded-t-lg":"flex w-full flex-row items-center justify-between gap-3 sticky bottom-0 border-t z-[100] p-4"])},[o.view==="form"||t(a).length>2?(f(),S(b,{key:0,onClick:n[0]||(n[0]=e=>v()),class:"w-full rounded py-5 text-base disabled:bg-gray-700 disabled:text-white",variant:"solid"},{prefix:r(()=>[c(t(C),{name:"chevron-up",class:"w-4"})]),default:r(()=>[h(" Actions ")]),_:1})):(f(!0),_(j,{key:1},R(t(a),e=>(f(),S(b,{class:"w-full py-5",variant:e.variant,theme:e.theme,onClick:m=>s({workflowAction:e.text})},V({default:r(()=>[h(" "+F(e.text),1)]),_:2},[e.featherIcon?{name:"prefix",fn:r(()=>[c(t(C),{name:e.featherIcon,class:"w-4"},null,8,["name"])]),key:"0"}:void 0]),1032,["variant","theme","onClick"]))),256))],2)):E("",!0),c(t(P),{buttons:t(a),"is-open":t(u),onDidDismiss:n[1]||(n[1]=e=>s({event:e}))},null,8,["buttons","is-open"])],64)}}},Y=O(X,[["__scopeId","data-v-02e56800"]]),le=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"}));export{Q as F,Y as W,oe as a,le as b};
//# sourceMappingURL=WorkflowActionSheet-DCtdbUIp.js.map
