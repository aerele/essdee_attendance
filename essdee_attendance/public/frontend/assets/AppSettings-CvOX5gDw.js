import{b as g,c as w}from"./index-DY6of2et.js";import{a as u,c as f,y,n as c,q as o,a2 as N,f as P,j as p,l as n,x as t,t as C,ai as k,I as E,k as B,aj as S,K as j,a5 as I,a7 as l}from"./frappe-ui-DZDZpt4w.js";import{a as h}from"./notifications-BuA3sCtD.js";const V={class:"flex flex-col h-screen w-screen"},z={class:"w-full sm:w-96"},$={class:"flex flex-row bg-white shadow-sm py-4 px-3 items-center justify-between border-b sticky top-0 z-10"},D={class:"flex flex-row items-center"},L=t("h2",{class:"text-xl font-semibold text-gray-900"},"Settings",-1),q={class:"flex flex-col gap-5 my-4 w-full p-4"},A={class:"flex flex-col bg-white rounded"},K={key:0,class:"flex -mt-2 items-center justify-center gap-2"},R={class:"text-gray-900 text-sm"},M={__name:"AppSettings",setup(U){var d;const _=N(),s=u((d=window.frappePushNotification)==null?void 0:d.isNotificationEnabled()),a=u(!1),m=f(()=>{var e;return!((e=window.frappe)!=null&&e.boot.push_relay_server_url&&h.data)||a.value}),r=f(()=>{var e;return(e=window.frappe)!=null&&e.boot.push_relay_server_url&&h.data?"":"Push notifications have been disabled on your site"}),v=e=>{e?b():(a.value=!0,window.frappePushNotification.disableNotification().then(i=>{s.value=!1,l({title:"Success",text:"Push notifications disabled",icon:"check-circle",position:"bottom-center",iconClasses:"text-green-500"})}).catch(i=>{l({title:"Error",text:i.message,icon:"alert-circle",position:"bottom-center",iconClasses:"text-red-500"})}).finally(()=>{a.value=!1}))},b=()=>{a.value=!0,window.frappePushNotification.enableNotification().then(e=>{e.permission_granted?s.value=!0:(l({title:"Error",text:"Push Notification permission denied",icon:"alert-circle",position:"bottom-center",iconClasses:"text-red-500"}),s.value=!1)}).catch(e=>{l({title:"Error",text:e.message,icon:"alert-circle",position:"bottom-center",iconClasses:"text-red-500"}),s.value=!1}).finally(()=>{a.value=!1})};return(e,i)=>{const x=P("Button");return p(),y(o(w),null,{default:c(()=>[n(o(g),{class:"ion-padding"},{default:c(()=>[t("div",V,[t("div",z,[t("header",$,[t("div",D,[n(x,{variant:"ghost",class:"!pl-0 hover:bg-white",onClick:i[0]||(i[0]=F=>o(_).back())},{default:c(()=>[n(o(C),{name:"chevron-left",class:"h-5 w-5"})]),_:1}),L])]),t("div",q,[t("div",A,[n(o(k),{size:"md",label:"Enable Push Notifications",class:E(r.value?"p-2":""),"model-value":s.value,disabled:m.value,description:r.value,"onUpdate:modelValue":v},null,8,["class","model-value","disabled","description"])]),a.value?(p(),B("div",K,[n(o(S),{class:"w-3 h-3 text-gray-800"}),t("span",R,j(s.value?"Disabling":"Enabling")+" Push Notifications... ",1)])):I("",!0)])])])]),_:1})]),_:1})}}};export{M as default};
//# sourceMappingURL=AppSettings-CvOX5gDw.js.map
