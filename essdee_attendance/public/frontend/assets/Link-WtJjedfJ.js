import{a as c,c as v,O as V,w as m,j as h,y as k,q as f,I as x,ac as q,al as O}from"./frappe-ui-DZDZpt4w.js";const g={__name:"Link",props:{doctype:{type:String,required:!0},modelValue:{type:String,required:!1,default:""},filters:{type:Object,default:{}},disabled:{type:Boolean,default:!1}},emits:["update:modelValue"],setup(l,{emit:y}){const a=l,b=y,u=c(null),r=c(""),d=v({get:()=>a.modelValue,set:e=>{b("update:modelValue",e||"")}}),s=V({url:"frappe.desk.search.search_link",params:{doctype:a.doctype,txt:r.value,filters:a.filters},method:"POST",transform:e=>e.map(t=>{var p,i;const o=(i=(p=t==null?void 0:t.description)==null?void 0:p.split(","))==null?void 0:i[0];return{label:o?`${o} : ${t.value}`:t.value,value:t.value}})}),n=O(e=>{s.update({params:{txt:e,doctype:a.doctype}}),s.reload()},300);return m(()=>a.doctype,()=>{!a.doctype||a.doctype===s.doctype||n("")},{immediate:!0}),m(()=>{var e;return(e=u.value)==null?void 0:e.query},e=>{e=e||"",r.value!==e&&(r.value=e,n(e))},{immediate:!0}),(e,t)=>(h(),k(f(q),{ref_key:"autocompleteRef",ref:u,size:"sm",modelValue:d.value,"onUpdate:modelValue":t[0]||(t[0]=o=>d.value=o),placeholder:`Select ${l.doctype}`,options:f(s).data,class:x(l.disabled?"pointer-events-none":""),disabled:l.disabled},null,8,["modelValue","placeholder","options","class","disabled"]))}};export{g as default};
//# sourceMappingURL=Link-WtJjedfJ.js.map
