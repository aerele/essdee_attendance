const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/BaseLayout-Bn-1xgoU.js","assets/index-DY6of2et.js","assets/frappe-ui-DZDZpt4w.js","assets/frappe-ui-Be2Kjakw.css","assets/index-BObsDHOH.css","assets/notifications-BuA3sCtD.js","assets/CheckInPanel-DttegPpz.js","assets/CustomIonModal-BGmNRiHp.js","assets/EmployeeAdvanceBalance-_G5yOQKx.js","assets/EmployeeAdvanceItem-7j1smnBm.js","assets/currencies-SJR35BQj.js","assets/EmployeeAvatar-BxuleOmI.js","assets/ExpenseAdvancesTable-CGU7nagf.js","assets/formatters-Ch330Bw1.js","assets/ExpenseClaimItem-CZZ6gXGV.js","assets/ExpenseClaimSummary-fVHpA6qK.js","assets/claims-B88SfAug.js","assets/ExpenseItems-DxyJd8cI.js","assets/ExpenseTaxesTable-D0X7C5DJ.js","assets/FormField-7rSNy-En.js","assets/Link-WtJjedfJ.js","assets/ExpensesTable-7co64J7z.js","assets/WorkflowActionSheet-DCtdbUIp.js","assets/WorkflowActionSheet-CepcMqYJ.css","assets/FileUploaderView-LNKCLKYB.js","assets/FileUploaderView-DrqnjYb4.css","assets/FormView-YD0d5amj.js","assets/workflow-VIVVb1p-.js","assets/FormattedField-U3aR-UJB.js","assets/Holidays-EcR78AXv.js","assets/LeaveBalance-Bt8p4A5L.js","assets/SemicircleChart-B8MTgycQ.js","assets/leaves-YLIW9pOG.js","assets/LeaveRequestItem-De6y222G.js","assets/ListFiltersActionSheet-CICp4Pdf.js","assets/ListView-B3FopGP1.js","assets/TabButtons-BKrC3lFY.js","assets/realtime-BMya6vLA.js","assets/PermissionBalance-JWIcJCbH.js","assets/permissions-CHn7z8OI.js","assets/PermissionListView-WOg1whEO.js","assets/PermissionRequestItem-Bmzr9M5j.js","assets/PermissionRequestList-Bdj_Pt3A.js","assets/PermissionRequestPanel-BBGXxrmm.js","assets/ProfileInfoModal-CryiM4gx.js","assets/QuickLinks-DoHwK9eb.js","assets/RequestList-V0OJ7Tmd.js","assets/RequestPanel-B4IR6NPc.js","assets/SalaryDetailTable-ChKeKMTt.js","assets/SalarySlipItem-H8at6Ths.js"])))=>i.map(i=>d[i]);
var ie=Object.defineProperty;var z=Object.getOwnPropertySymbols;var se=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var H=(n,l,u)=>l in n?ie(n,l,{enumerable:!0,configurable:!0,writable:!0,value:u}):n[l]=u,U=(n,l)=>{for(var u in l||(l={}))se.call(l,u)&&H(n,u,l[u]);if(z)for(var u of z(l))re.call(l,u)&&H(n,u,l[u]);return n};import{E as ne,a2 as _e,a as P,a3 as ue,O as A,c as R,a4 as de,e as me,f as ce,q as i,j as d,k as p,x as f,K as w,l as c,t as I,F as G,H as J,I as pe,y as k,J as fe,a5 as O,n as v,v as T,a6 as ve,a7 as K,a8 as ye,a9 as Ee,_ as e}from"./frappe-ui-DZDZpt4w.js";import{I as be,m as Q}from"./index-DY6of2et.js";import De from"./FormattedField-U3aR-UJB.js";import{W as Ie,F as Te}from"./WorkflowActionSheet-DCtdbUIp.js";import{g as Ve}from"./currencies-SJR35BQj.js";import{f as xe}from"./formatters-Ch330Bw1.js";import{u as Le}from"./workflow-VIVVb1p-.js";const Pe=(n,l,u)=>{const m=n[l];return m?typeof m=="function"?m():Promise.resolve(m):new Promise((V,y)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(y.bind(null,new Error("Unknown variable dynamic import: "+l+(l.split("/").length!==u?". Note that variables only represent file names one level deep.":""))))})},Ae=n=>(ye("data-v-e6fc6526"),n=n(),Ee(),n),Re={key:0,class:"bg-white w-full flex flex-col items-center justify-center pb-5 max-h-[calc(100vh-5rem)]"},we={class:"w-full flex flex-row gap-2 pt-8 pb-5 border-b justify-center items-center sticky top-0 z-[100]"},ke={class:"text-gray-900 font-bold text-lg text-center"},Oe={class:"w-full p-4 overflow-auto"},he={class:"flex flex-col items-center justify-center gap-5"},ge={class:"text-gray-600 text-base"},Se={key:0,class:"flex flex-col gap-2 w-full"},Ce=Ae(()=>f("div",{class:"text-gray-600 text-base"},"Attachments",-1)),Fe={class:"w-full flex flex-col items-center gap-2"},je={class:"flex flex-row items-center justify-between text-gray-700 text-sm"},Me=["onClick"],$e={key:1,class:"flex w-full flex-row items-center justify-between gap-3 sticky bottom-0 border-t z-[100] p-4"},qe={key:2,class:"flex w-full flex-row items-center justify-between gap-3 sticky bottom-0 border-t z-[100] p-4"},Be={key:3,class:"flex w-full flex-row items-center justify-between gap-3 sticky bottom-0 border-t z-[100] p-4"},Ne={__name:"RequestActionSheet",props:{fields:{type:Array,required:!0},modelValue:{type:Object,required:!0}},setup(n){const l=n,u=_e();let m=P(!1),V=P({}),y=P(null);function X(t){V.value=t,m.value=!0}const o=ue({doctype:l.modelValue.doctype,name:l.modelValue.name,auto:!0,onSuccess(t){x.reload()}}),x=A({url:"essdee_attendance.api.get_attachments",params:{dt:l.modelValue.doctype,dn:l.modelValue.name}}),Y=A({url:"frappe.client.get_doc_permissions",params:{doctype:l.modelValue.doctype,docname:l.modelValue.name},auto:!0}),Z=A({url:"essdee_attendance.api.get_permitted_fields_for_write",params:{doctype:l.modelValue.doctype},auto:!0});function L(t){var a,s;return t==="approval"?(a=Z.data)==null?void 0:a.includes(E.value):(s=Y.data)==null?void 0:s.permissions[t]}const ee=R(()=>{var a,s,_;let t=(a=o==null?void 0:o.doc)==null?void 0:a.currency;return!t&&((s=o==null?void 0:o.doc)!=null&&s.company)&&(t=Ve((_=o==null?void 0:o.doc)==null?void 0:_.company)),t}),te=R(()=>l.fields.filter(t=>{var a,s;return t.fieldtype==="Currency"?t.value=xe((a=o.doc)==null?void 0:a[t.fieldname],ee.value):(t.fieldtype==="Table"&&(t.component=de(()=>Pe(Object.assign({"./BaseLayout.vue":()=>e(()=>import("./BaseLayout-Bn-1xgoU.js"),__vite__mapDeps([0,1,2,3,4,5])),"./BottomTabs.vue":()=>e(()=>import("./index-DY6of2et.js").then(_=>_.N),__vite__mapDeps([1,2,3,4])),"./CheckInPanel.vue":()=>e(()=>import("./CheckInPanel-DttegPpz.js"),__vite__mapDeps([6,2,3,1,4])),"./CustomIonModal.vue":()=>e(()=>import("./CustomIonModal-BGmNRiHp.js"),__vite__mapDeps([7,1,2,3,4])),"./EmployeeAdvanceBalance.vue":()=>e(()=>import("./EmployeeAdvanceBalance-_G5yOQKx.js"),__vite__mapDeps([8,9,2,3,10,11,1,4])),"./EmployeeAdvanceItem.vue":()=>e(()=>import("./EmployeeAdvanceItem-7j1smnBm.js"),__vite__mapDeps([9,2,3,10,11,1,4])),"./EmployeeAvatar.vue":()=>e(()=>import("./EmployeeAvatar-BxuleOmI.js"),__vite__mapDeps([11,2,3,1,4])),"./EmptyState.vue":()=>e(()=>import("./index-DY6of2et.js").then(_=>_.O),__vite__mapDeps([1,2,3,4])),"./ExpenseAdvancesTable.vue":()=>e(()=>import("./ExpenseAdvancesTable-CGU7nagf.js"),__vite__mapDeps([12,2,3,10,13])),"./ExpenseClaimItem.vue":()=>e(()=>import("./ExpenseClaimItem-CZZ6gXGV.js"),__vite__mapDeps([14,2,3,11,1,4,10,13])),"./ExpenseClaimSummary.vue":()=>e(()=>import("./ExpenseClaimSummary-fVHpA6qK.js"),__vite__mapDeps([15,2,3,16,1,4,13])),"./ExpenseItems.vue":()=>e(()=>import("./ExpenseItems-DxyJd8cI.js"),__vite__mapDeps([17,10,2,3])),"./ExpenseTaxesTable.vue":()=>e(()=>import("./ExpenseTaxesTable-D0X7C5DJ.js"),__vite__mapDeps([18,2,3,19,20,1,4,7,13])),"./ExpensesTable.vue":()=>e(()=>import("./ExpensesTable-7co64J7z.js"),__vite__mapDeps([21,2,3,19,20,1,4,7,16,13])),"./FilePreviewModal.vue":()=>e(()=>import("./WorkflowActionSheet-DCtdbUIp.js").then(_=>_.a),__vite__mapDeps([22,1,2,3,4,23])),"./FileUploaderView.vue":()=>e(()=>import("./FileUploaderView-LNKCLKYB.js"),__vite__mapDeps([24,2,3,1,4,22,23,25])),"./FormField.vue":()=>e(()=>import("./FormField-7rSNy-En.js"),__vite__mapDeps([19,2,3,20])),"./FormView.vue":()=>e(()=>import("./FormView-YD0d5amj.js"),__vite__mapDeps([26,2,3,19,20,24,1,4,22,23,25,27,10,13])),"./FormattedField.vue":()=>e(()=>import("./FormattedField-U3aR-UJB.js"),__vite__mapDeps([28,2,3,11,1,4])),"./Holidays.vue":()=>e(()=>import("./Holidays-EcR78AXv.js"),__vite__mapDeps([29,1,2,3,4])),"./InstallPrompt.vue":()=>e(()=>import("./index-DY6of2et.js").then(_=>_.M),__vite__mapDeps([1,2,3,4])),"./LeaveBalance.vue":()=>e(()=>import("./LeaveBalance-Bt8p4A5L.js"),__vite__mapDeps([30,31,2,3,32,1,4])),"./LeaveRequestItem.vue":()=>e(()=>import("./LeaveRequestItem-De6y222G.js"),__vite__mapDeps([33,2,3,11,1,4,32])),"./Link.vue":()=>e(()=>import("./Link-WtJjedfJ.js"),__vite__mapDeps([20,2,3])),"./ListFiltersActionSheet.vue":()=>e(()=>import("./ListFiltersActionSheet-CICp4Pdf.js"),__vite__mapDeps([34,19,2,3,20])),"./ListView.vue":()=>e(()=>import("./ListView-B3FopGP1.js"),__vite__mapDeps([35,2,3,1,4,36,33,11,32,14,10,13,9,34,19,20,7,27,37])),"./PermissionBalance.vue":()=>e(()=>import("./PermissionBalance-JWIcJCbH.js"),__vite__mapDeps([38,39,2,3,1,4])),"./PermissionListView.vue":()=>e(()=>import("./PermissionListView-WOg1whEO.js"),__vite__mapDeps([40,2,3,1,4,36,41,11,39,34,19,20,7,27,37])),"./PermissionRequestItem.vue":()=>e(()=>import("./PermissionRequestItem-Bmzr9M5j.js"),__vite__mapDeps([41,2,3,11,1,4,39])),"./PermissionRequestList.vue":()=>e(()=>import("./PermissionRequestList-Bdj_Pt3A.js"),__vite__mapDeps([42,1,2,3,4,28,11,22,23,10,13,27])),"./PermissionRequestPanel.vue":()=>e(()=>import("./PermissionRequestPanel-BBGXxrmm.js"),__vite__mapDeps([43,36,2,3,42,1,4,28,11,22,23,10,13,27,39,16,41,14,37])),"./ProfileInfoModal.vue":()=>e(()=>import("./ProfileInfoModal-CryiM4gx.js"),__vite__mapDeps([44,2,3,28,11,1,4])),"./QuickLinks.vue":()=>e(()=>import("./QuickLinks-DoHwK9eb.js"),__vite__mapDeps([45,2,3])),"./RequestList.vue":()=>e(()=>import("./RequestList-V0OJ7Tmd.js"),__vite__mapDeps([46,1,2,3,4,28,11,22,23,10,13,27])),"./RequestPanel.vue":()=>e(()=>import("./RequestPanel-B4IR6NPc.js"),__vite__mapDeps([47,36,2,3,46,1,4,28,11,22,23,10,13,27,32,16,33,14,37])),"./SalaryDetailTable.vue":()=>e(()=>import("./SalaryDetailTable-ChKeKMTt.js"),__vite__mapDeps([48,1,2,3,4,13])),"./SalarySlipItem.vue":()=>e(()=>import("./SalarySlipItem-H8at6Ths.js"),__vite__mapDeps([49,2,3,1,4,13])),"./SemicircleChart.vue":()=>e(()=>import("./SemicircleChart-B8MTgycQ.js"),__vite__mapDeps([31,2,3])),"./TabButtons.vue":()=>e(()=>import("./TabButtons-BKrC3lFY.js"),__vite__mapDeps([36,2,3])),"./WorkflowActionSheet.vue":()=>e(()=>import("./WorkflowActionSheet-DCtdbUIp.js").then(_=>_.b),__vite__mapDeps([22,1,2,3,4,23]))}),`./${t.componentName}.vue`,2))),t.value=((s=o==null?void 0:o.doc)==null?void 0:s[t.fieldname])||l.modelValue[t.fieldname]),t.value})),E=R(()=>l.modelValue.doctype==="Expense Claim"?"approval_status":"status"),ae=({status:t="",docstatus:a=0})=>{if(t)return`${t} successfully!`;if(a)return`Document ${a===1?"submitted":"cancelled"} successfully!`},le=({status:t="",docstatus:a=0})=>{if(t)return`${t==="Approved"?"Approval":"Rejection"} failed!`;if(a)return`Document ${a===1?"submission":"cancellation"} failed!`},b=({status:t="",docstatus:a=0})=>{let s={};t&&(s[E.value]=t),a&&(s.docstatus=a),o.setValue.submit(U({},s),{onSuccess(){a!==0&&Q.dismiss(),K({title:"Success",text:ae({status:t,docstatus:a}),icon:"check-circle",position:"bottom-center",iconClasses:"text-green-500"})},onError(){K({title:"Error",text:le({status:t,docstatus:a}),icon:"alert-circle",position:"bottom-center",iconClasses:"text-red-500"})}})},oe=()=>{Q.dismiss(),u.push({name:`${l.modelValue.doctype.replace(/\s+/g,"")}DetailView`,params:{id:l.modelValue.name}})};return me(()=>{y.value=Le(l.modelValue.doctype)}),(t,a)=>{var _,h,g,S,C,F,j,M,$,q,B,N,W;const s=ce("Button");return(_=i(o))!=null&&_.doc?(d(),p("div",Re,[f("div",we,[f("span",ke,w((h=i(o))==null?void 0:h.doctype),1),c(i(I),{name:"external-link",class:"h-4 w-4 text-gray-500 cursor-pointer",onClick:oe})]),f("div",Oe,[f("div",he,[(d(!0),p(G,null,J(te.value,r=>{var D;return d(),p("div",{key:r.fieldname,class:pe([["Small Text","Text","Long Text","Table"].includes(r.fieldtype)?"flex-col":"flex-row items-center justify-between","flex w-full"])},[f("div",ge,w(r.label),1),r.fieldtype==="Table"?(d(),k(fe(r.component),{key:0,doc:(D=i(o))==null?void 0:D.doc},null,8,["doc"])):(d(),k(De,{key:1,value:r.value,fieldtype:r.fieldtype,fieldname:r.fieldname},null,8,["value","fieldtype","fieldname"]))],2)}),128)),(S=(g=i(x))==null?void 0:g.data)!=null&&S.length?(d(),p("div",Se,[Ce,f("ul",Fe,[(d(!0),p(G,null,J(i(x).data,(r,D)=>(d(),p("li",{class:"bg-gray-100 rounded p-2 w-full",key:D},[f("div",je,[f("span",{class:"grow",onClick:We=>X(r)},w(r.file_name||r.name),9,Me)])]))),128))])])):O("",!0)])]),(C=i(y))!=null&&C.hasWorkflow?(d(),k(Ie,{key:0,doc:i(o).doc,workflow:i(y),view:"actionSheet"},null,8,["doc","workflow"])):["Open","Draft"].includes((j=(F=i(o))==null?void 0:F.doc)==null?void 0:j[E.value])&&L("approval")?(d(),p("div",$e,[c(s,{onClick:a[0]||(a[0]=r=>b({status:"Rejected"})),class:"w-full py-5",variant:"subtle",theme:"red"},{prefix:v(()=>[c(i(I),{name:"x",class:"w-4"})]),default:v(()=>[T(" Reject ")]),_:1}),c(s,{onClick:a[1]||(a[1]=r=>b({status:"Approved"})),class:"w-full py-5",variant:"solid",theme:"green"},{prefix:v(()=>[c(i(I),{name:"check",class:"w-4"})]),default:v(()=>[T(" Approve ")]),_:1})])):(($=(M=i(o))==null?void 0:M.doc)==null?void 0:$.docstatus)===0&&["Approved","Rejected"].includes((B=(q=i(o))==null?void 0:q.doc)==null?void 0:B[E.value])&&L("submit")?(d(),p("div",qe,[c(s,{onClick:a[2]||(a[2]=r=>b({docstatus:1})),class:"w-full py-5",variant:"solid"},{default:v(()=>[T(" Submit ")]),_:1})])):((W=(N=i(o))==null?void 0:N.doc)==null?void 0:W.docstatus)===1&&L("cancel")?(d(),p("div",Be,[c(s,{onClick:a[3]||(a[3]=r=>b({docstatus:2})),class:"w-full py-5",variant:"subtle",theme:"red"},{prefix:v(()=>[c(i(I),{name:"x",class:"w-4"})]),default:v(()=>[T(" Cancel ")]),_:1})])):O("",!0),c(i(be),{ref:"modal","is-open":i(m),onDidDismiss:a[4]||(a[4]=r=>ve(m)?m.value=!1:m=!1)},{default:v(()=>[c(Te,{file:i(V)},null,8,["file"])]),_:1},8,["is-open"])])):O("",!0)}}},Ye=ne(Ne,[["__scopeId","data-v-e6fc6526"]]),Ze=[{fieldname:"name",label:"ID",fieldtype:"Data"},{fieldname:"leave_type",label:"Leave Type",fieldtype:"Link"},{fieldname:"leave_dates",label:"Leave Dates",fieldtype:"DateRange"},{fieldname:"half_day",label:"Half Day",fieldtype:"Check"},{fieldname:"half_day_date",label:"Half Day Date",fieldtype:"Date"},{fieldname:"total_leave_days",label:"Total Leave Days",fieldtype:"Float"},{fieldname:"employee",label:"Employee",fieldtype:"Link"},{fieldname:"leave_balance",label:"Leave Balance",fieldtype:"Float"},{fieldname:"status",label:"Status",fieldtype:"Select"},{fieldname:"description",label:"Reason",fieldtype:"Small Text"}],et=[{fieldname:"name",label:"ID",fieldtype:"Data"},{fieldname:"permission_type",label:"Permission Type",fieldtype:"Select"},{fieldname:"employee",label:"Employee",fieldtype:"Link"},{fieldname:"leave_dates",label:"Permission Time",fieldtype:"DateRange"},{fieldname:"status",label:"Status",fieldtype:"Select"},{fieldname:"description",label:"Reason",fieldtype:"Small Text"}],tt=[{fieldname:"name",label:"ID",fieldtype:"Data"},{fieldname:"posting_date",label:"Posting Date",fieldtype:"Date"},{fieldname:"employee",label:"Employee",fieldtype:"Link"},{fieldname:"expenses",label:"Expenses",fieldtype:"Table",componentName:"ExpenseItems"},{fieldname:"total_claimed_amount",label:"Total Claimed Amount",fieldtype:"Currency"},{fieldname:"total_sanctioned_amount",label:"Total Sanctioned Amount",fieldtype:"Currency"},{fieldname:"total_taxes_and_charges",label:"Total Taxes and Charges",fieldtype:"Currency"},{fieldname:"total_advance_amount",label:"Total Advance Amount",fieldtype:"Currency"},{fieldname:"grand_total",label:"Grand Total",fieldtype:"Currency"},{fieldname:"status",label:"Status",fieldtype:"Select"},{fieldname:"approval_status",label:"Approval Status",fieldtype:"Select"}];export{tt as E,Ze as L,et as P,Ye as R};
//# sourceMappingURL=requestSummaryFields-DzjVQLMC.js.map
